<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<ui:composition template="/templates/mainLayout.xhtml">
    <ui:define name="moduleContent">
        <!--TODO : parameters columns on userProfile preference -->
        <div id="injectorBg" class="backgroundInjector">
	        <div align="center" style="vertical-align: middle" class="arianeTransparentBg3-uiwc arianeDashboard">
	            <ui:repeat value="#{injectorDashboardController.dashboardColumn}" var="column">
	                <br/><br/><br/>
	                <p:carousel id="basicCarousel" value="#{injectorDashboardController.getColumnWidgets(column)}" var="widget" itemStyle="width:350px" numVisible="3">
	                    <f:facet name="header">
	                        <h:outputText value="#{injectorDashboardController.getColumnName(column)}" />
	                    </f:facet>
	                    <h:outputLink value="#{injectorDashboardController.getWidgetAddress(widget)}">
	                        <h:panelGrid columns="2" cellpadding="1" style="width:80%; vertical-align: middle; text-align: center;">
	                            <i class="#{injectorDashboardController.getWidgetIcon(widget)}"/>
	                            <h:panelGroup>
	                                <h:outputText value="#{injectorDashboardController.getWidgetValue(widget)}" style="vertical-align: middle; font-weight: bold"/><br/>
	                                <h:outputText value="#{injectorDashboardController.getWidgetDescription(widget)}" style="vertical-align: middle"/>
	                            </h:panelGroup>
	                        </h:panelGrid>
	                    </h:outputLink>
	                </p:carousel>
	            </ui:repeat>
	        </div>
            <br/><br/>
	    </div>
        <script type="application/javascript">
            var readyStateCheckIntervalDir = setInterval(function(){
                if (document.readyState === "complete") {
                    clearInterval(readyStateCheckIntervalDir);
                    var bg = $("#injectorBg").css("background");
                    if (bg.indexOf("bg-ariane-injector.jpg") > -1)
                        $("#injectorBg").css({height: $(document).height() - 42});
                    else
                        $("#injectorBg").css({height: $(document).height() - 48});
                }
            }, 100);

            window.onresize = function(event) {
                var bg = $("#injectorBg").css("background");
                if (bg.indexOf("bg-ariane-injector.jpg") > -1)
                    $("#injectorBg").css({height: $(document).height() - 42});
                else
                    $("#injectorBg").css({height: $(document).height() - 48});
            };
        </script>
    </ui:define>
</ui:composition>
</html>